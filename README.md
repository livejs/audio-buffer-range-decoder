audio-buffer-range-decoder
===

Decode specified ranges of PCM Wave or Opus webm files on disk to AudioBuffers. Probably only works if you are using electron.

Useful for streaming large audio files from disk when you don't want to load the whole thing into memory.

[![NPM](https://nodei.co/npm/audio-buffer-range-decoder.png)](https://nodei.co/npm/audio-buffer-range-decoder/)

## Supported formats

- PCM Wave
- Opus webm (format generated by [MediaRecorder](https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder_API))

**Includes static builds of ffmpeg** for reading the Opus formatted files. Supported platforms: darwin, linux, win32

## API

```js
var RangeDecoder = require('audio-buffer-range-decoder')
```

### `var decodeRange = RangeDecoder(filePath, options, onLoad)`

Specify `filePath` on disk. Opens the file ready for access.

`onLoad(err, meta)` is called when meta data has loaded.

Returns a `decodeRange` function.

*Options:*
 - `fs`: pass in [fs](https://nodejs.org/api/fs.html) implementation (required)
 - `audio`: instance of `AudioContext` to use for decoding (required)

### `decodeRange(startTime, duration, callback)`

Pass in `startTime` and `duration` in seconds. `callback(err, audioBuffer)` will be called when data has been decoded or an error has occurred.

### `decodeRange.close()`

Call this when you are done reading to close the underlying file descriptor.
